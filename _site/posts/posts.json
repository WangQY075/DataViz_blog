[
  {
    "path": "posts/2021-07-14-assignment/",
    "title": "Assignment",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Qinyu Wang",
        "url": "https://www.linkedin.com/in/qinyu-wang/"
      }
    ],
    "date": "2021-07-14",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nLibrary Packages\r\nImport data\r\nData parperation-cc_data\r\nthe most popular locations\r\nBar chart cc_data\r\ntreemap cc_data\r\nBar chart loyalty_data\r\nPrice_cc_card\r\n\r\n- when they are popular?\r\nHeatmap by weekday\r\nHeatmap by date\r\nHeatmap car\r\n\r\n\r\nLibrary Packages\r\n\r\n\r\npackages = c('raster', 'sf', \r\n             'tmap', 'clock', \r\n             'tidyverse','ggplot2','ggraph',\r\n             'lubridate','ggthemes','viridis','plotly','treemapify')\r\nfor (p in packages){\r\n  if(!require(p, character.only = T)){\r\n    install.packages(p)\r\n  }\r\n  library(p,character.only = T)\r\n}\r\n\r\n\r\n\r\nImport data\r\n\r\n\r\ncc_data<- read.csv('D:/ISSS608 Data Visualization/MC2/MC2/cc_data.csv')\r\n\r\nloyalty_data <- read.csv('D:/ISSS608 Data Visualization/MC2/MC2/loyalty_data.csv')\r\n\r\ncar <- read_csv('D:/ISSS608 Data Visualization/MC2/MC2/gps.csv')\r\n\r\n\r\n\r\nData parperation-cc_data\r\n\r\n\r\ncc_data_wkday <- cc_data\r\n\r\ncc_data_wkday$dmy_hm <- date_time_parse(cc_data_wkday$timestamp,\r\n                zone = \"\",\r\n                format = \"%m/%d/%Y %H:%M\")\r\n\r\ncc_data_wkday$weekday <- wday(cc_data_wkday$dmy_hm, \r\n                             label = TRUE, \r\n                             abbr = FALSE)\r\n\r\ncc_data_wkday$hour <- hour(cc_data_wkday$dmy_hm)\r\n\r\ncc_data_wkday$day <- day(cc_data_wkday$dmy_hm)\r\n\r\ncc_data$last4ccnum <- as.character(cc_data$last4ccnum)\r\n\r\nbreaks <- hour(hm(\"00:00\", \"5:00\", \"12:00\", \"18:00\", \"23:59\"))\r\nlabels <- c(\"Night\", \"Morning\", \"Afternoon\", \"Evening\")\r\n\r\ncc_data_wkday$dmy_hm <- cut(x=hour(cc_data_wkday$dmy_hm), breaks = breaks, labels = labels, include.lowest=TRUE)\r\n\r\n\r\n\r\n#data parperation loyalty_data\r\n\r\n\r\nloyalty_card <- loyalty_data\r\n\r\nloyalty_card$dmy<- date_time_parse(loyalty_card$timestamp,\r\n                zone = \"\",\r\n                format = \"%m/%d/%Y\")\r\n\r\nloyalty_card$weekday <- wday(loyalty_card$dmy, \r\n                             label = TRUE, \r\n                             abbr = FALSE)\r\n\r\nloyalty_card$day <- day(loyalty_card$dmy)\r\n\r\n\r\n\r\n#data parperation car_data\r\n\r\n\r\ncar$dmy_hm <- date_time_parse(car$Timestamp,\r\n                zone = \"\",\r\n                format = \"%m/%d/%Y %H:%M:%S\")\r\n\r\ncar$day <- day(car$dmy_hm)\r\n\r\ncar$hour <- hour(car$dmy_hm)\r\n\r\n\r\n\r\nthe most popular locations\r\nBar chart cc_data\r\n\r\n\r\ncc_bar_chart <- cc_data_wkday %>% \r\n  group_by(location) %>% \r\n  summarise(n = n()) %>% \r\n  ungroup()\r\n\r\np <- ggplot(cc_bar_chart,aes(x = reorder(location,-n), \r\n                             y = n)) + \r\n  geom_col(color=\"black\", \r\n           fill=\"light blue\") + \r\n  theme(axis.text.x = element_text(angle = 90, \r\n                                   hjust = 1, \r\n                                   vjust = .5))\r\n\r\np <- p + ggtitle(\"Location by frequen cc\") + \r\n        labs(y=\"Frequency\", x = \"Location\")\r\n\r\nggplotly(p)\r\n\r\n\r\n\r\n{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.900000000000006,0.899999999999999,0.900000000000002,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.9,0.9,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.900000000000006],\"base\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"x\":[15,30,7,27,16,10,4,14,19,23,12,24,34,25,32,11,8,21,3,5,2,13,9,1,22,28,29,17,31,6,26,18,20,33],\"y\":[25,4,72,6,25,47,156,30,19,9,38,8,1,8,2,47,64,10,158,92,171,37,64,212,10,6,6,24,4,87,8,20,18,2],\"text\":[\"reorder(location, -n): Abila Airport<br />n:  25\",\"reorder(location, -n): Abila Scrapyard<br />n:   4\",\"reorder(location, -n): Abila Zacharo<br />n:  72\",\"reorder(location, -n): Ahaggo Museum<br />n:   6\",\"reorder(location, -n): Albert's Fine Clothing<br />n:  25\",\"reorder(location, -n): Bean There Done That<br />n:  47\",\"reorder(location, -n): Brew've Been Served<br />n: 156\",\"reorder(location, -n): Brewed Awakenings<br />n:  30\",\"reorder(location, -n): Carlyle Chemical Inc.<br />n:  19\",\"reorder(location, -n): Chostus Hotel<br />n:   9\",\"reorder(location, -n): Coffee Cameleon<br />n:  38\",\"reorder(location, -n): Coffee Shack<br />n:   8\",\"reorder(location, -n): Daily Dealz<br />n:   1\",\"reorder(location, -n): Desafio Golf Course<br />n:   8\",\"reorder(location, -n): Frank's Fuel<br />n:   2\",\"reorder(location, -n): Frydos Autosupply n' More<br />n:  47\",\"reorder(location, -n): Gelatogalore<br />n:  64\",\"reorder(location, -n): General Grocer<br />n:  10\",\"reorder(location, -n): Guy's Gyros<br />n: 158\",\"reorder(location, -n): Hallowed Grounds<br />n:  92\",\"reorder(location, -n): Hippokampos<br />n: 171\",\"reorder(location, -n): Jack's Magical Beans<br />n:  37\",\"reorder(location, -n): Kalami Kafenion<br />n:  64\",\"reorder(location, -n): Katerina’s Café<br />n: 212\",\"reorder(location, -n): Kronos Mart<br />n:  10\",\"reorder(location, -n): Kronos Pipe and Irrigation<br />n:   6\",\"reorder(location, -n): Maximum Iron and Steel<br />n:   6\",\"reorder(location, -n): Nationwide Refinery<br />n:  24\",\"reorder(location, -n): Octavio's Office Supplies<br />n:   4\",\"reorder(location, -n): Ouzeri Elian<br />n:  87\",\"reorder(location, -n): Roberts and Sons<br />n:   8\",\"reorder(location, -n): Shoppers' Delight<br />n:  20\",\"reorder(location, -n): Stewart and Sons Fabrication<br />n:  18\",\"reorder(location, -n): U-Pump<br />n:   2\"],\"type\":\"bar\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(173,216,230,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"}},\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":45.4063926940639,\"r\":7.30593607305936,\"b\":193.7899543379,\"l\":43.1050228310502},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Location by frequen cc\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,34.6],\"tickmode\":\"array\",\"ticktext\":[\"Katerina’s Café\",\"Hippokampos\",\"Guy's Gyros\",\"Brew've Been Served\",\"Hallowed Grounds\",\"Ouzeri Elian\",\"Abila Zacharo\",\"Gelatogalore\",\"Kalami Kafenion\",\"Bean There Done That\",\"Frydos Autosupply n' More\",\"Coffee Cameleon\",\"Jack's Magical Beans\",\"Brewed Awakenings\",\"Abila Airport\",\"Albert's Fine Clothing\",\"Nationwide Refinery\",\"Shoppers' Delight\",\"Carlyle Chemical Inc.\",\"Stewart and Sons Fabrication\",\"General Grocer\",\"Kronos Mart\",\"Chostus Hotel\",\"Coffee Shack\",\"Desafio Golf Course\",\"Roberts and Sons\",\"Ahaggo Museum\",\"Kronos Pipe and Irrigation\",\"Maximum Iron and Steel\",\"Abila Scrapyard\",\"Octavio's Office Supplies\",\"Frank's Fuel\",\"U-Pump\",\"Daily Dealz\"],\"tickvals\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34],\"categoryorder\":\"array\",\"categoryarray\":[\"Katerina’s Café\",\"Hippokampos\",\"Guy's Gyros\",\"Brew've Been Served\",\"Hallowed Grounds\",\"Ouzeri Elian\",\"Abila Zacharo\",\"Gelatogalore\",\"Kalami Kafenion\",\"Bean There Done That\",\"Frydos Autosupply n' More\",\"Coffee Cameleon\",\"Jack's Magical Beans\",\"Brewed Awakenings\",\"Abila Airport\",\"Albert's Fine Clothing\",\"Nationwide Refinery\",\"Shoppers' Delight\",\"Carlyle Chemical Inc.\",\"Stewart and Sons Fabrication\",\"General Grocer\",\"Kronos Mart\",\"Chostus Hotel\",\"Coffee Shack\",\"Desafio Golf Course\",\"Roberts and Sons\",\"Ahaggo Museum\",\"Kronos Pipe and Irrigation\",\"Maximum Iron and Steel\",\"Abila Scrapyard\",\"Octavio's Office Supplies\",\"Frank's Fuel\",\"U-Pump\",\"Daily Dealz\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-90,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Location\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-10.6,222.6],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"50\",\"100\",\"150\",\"200\"],\"tickvals\":[0,50,100,150,200],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"50\",\"100\",\"150\",\"200\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Frequency\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.88976377952756,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"15343c35f58\":{\"x\":{},\"y\":{},\"type\":\"bar\"}},\"cur_data\":\"15343c35f58\",\"visdat\":{\"15343c35f58\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\r\ntreemap cc_data\r\n\r\n\r\ncc_treemap <- cc_data_wkday %>% \r\n  select(location,price) %>% \r\n  group_by(location) %>% \r\n  mutate(total_price = sum(price)) %>% \r\n  ungroup()\r\n  \r\n\r\n\r\nsum_cc_data <- cc_data %>%\r\nselect(location, price) %>%\r\ngroup_by(location) %>%\r\nsummarise(total_price = sum(price), total_count = n()) %>%\r\narrange(desc(total_count), desc(total_price))\r\n\r\nglimpse(sum_cc_data)\r\n\r\n\r\nRows: 34\r\nColumns: 3\r\n$ location    <chr> \"Katerina’s Café\", \"Hippokampos\", \"Guy's Gyros\",~\r\n$ total_price <dbl> 7286.37, 6675.90, 5346.25, 3124.04, 1848.28, 320~\r\n$ total_count <int> 212, 171, 158, 156, 92, 87, 72, 64, 64, 47, 47, ~\r\n\r\nggplot(G20, aes(area = gdp_mil_usd, fill = hdi, label = country)) +\r\n  geom_treemap() +\r\n  geom_treemap_text(fontface = \"italic\", colour = \"white\", place = \"centre\",\r\n                    grow = TRUE)\r\n\r\n\r\n\r\n\r\nBar chart loyalty_data\r\n\r\n\r\nloyalty_bar_chart <- loyalty_data %>% \r\n  group_by(location) %>% \r\n  summarise(n = n()) %>% \r\n  ungroup()\r\n\r\np2 <- ggplot(loyalty_bar_chart,aes(x = reorder(location,-n), \r\n                             y = n)) + \r\n  geom_col(color=\"black\", \r\n           fill=\"light blue\") + \r\n  theme(axis.text.x = element_text(angle = 90, \r\n                                   hjust = 1, \r\n                                   vjust = .5))\r\n\r\np2 <- p2 + ggtitle(\"Location by frequency loyalty\") + \r\n        labs(y=\"Frequency\", x = \"Location\")\r\n\r\nggplotly(p2)\r\n\r\n\r\n\r\n{\"x\":{\"data\":[{\"orientation\":\"v\",\"width\":[0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.900000000000002,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.9,0.9,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.899999999999999,0.9,0.899999999999999,0.899999999999999,0.899999999999999,0.900000000000006],\"base\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],\"x\":[15,30,7,26,16,10,4,14,18,23,12,22,24,32,11,9,21,3,6,2,13,8,1,25,27,28,17,31,5,29,19,20,33],\"y\":[26,4,71,6,25,45,140,29,19,8,37,9,8,2,42,60,12,146,80,155,35,66,195,8,6,6,23,3,84,6,18,17,1],\"text\":[\"reorder(location, -n): Abila Airport<br />n:  26\",\"reorder(location, -n): Abila Scrapyard<br />n:   4\",\"reorder(location, -n): Abila Zacharo<br />n:  71\",\"reorder(location, -n): Ahaggo Museum<br />n:   6\",\"reorder(location, -n): Albert's Fine Clothing<br />n:  25\",\"reorder(location, -n): Bean There Done That<br />n:  45\",\"reorder(location, -n): Brew've Been Served<br />n: 140\",\"reorder(location, -n): Brewed Awakenings<br />n:  29\",\"reorder(location, -n): Carlyle Chemical Inc.<br />n:  19\",\"reorder(location, -n): Chostus Hotel<br />n:   8\",\"reorder(location, -n): Coffee Cameleon<br />n:  37\",\"reorder(location, -n): Coffee Shack<br />n:   9\",\"reorder(location, -n): Desafio Golf Course<br />n:   8\",\"reorder(location, -n): Frank's Fuel<br />n:   2\",\"reorder(location, -n): Frydos Autosupply n' More<br />n:  42\",\"reorder(location, -n): Gelatogalore<br />n:  60\",\"reorder(location, -n): General Grocer<br />n:  12\",\"reorder(location, -n): Guy's Gyros<br />n: 146\",\"reorder(location, -n): Hallowed Grounds<br />n:  80\",\"reorder(location, -n): Hippokampos<br />n: 155\",\"reorder(location, -n): Jack's Magical Beans<br />n:  35\",\"reorder(location, -n): Kalami Kafenion<br />n:  66\",\"reorder(location, -n): Katerina’s Café<br />n: 195\",\"reorder(location, -n): Kronos Mart<br />n:   8\",\"reorder(location, -n): Kronos Pipe and Irrigation<br />n:   6\",\"reorder(location, -n): Maximum Iron and Steel<br />n:   6\",\"reorder(location, -n): Nationwide Refinery<br />n:  23\",\"reorder(location, -n): Octavio's Office Supplies<br />n:   3\",\"reorder(location, -n): Ouzeri Elian<br />n:  84\",\"reorder(location, -n): Roberts and Sons<br />n:   6\",\"reorder(location, -n): Shoppers' Delight<br />n:  18\",\"reorder(location, -n): Stewart and Sons Fabrication<br />n:  17\",\"reorder(location, -n): U-Pump<br />n:   1\"],\"type\":\"bar\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(173,216,230,1)\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"}},\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":45.4063926940639,\"r\":7.30593607305936,\"b\":193.7899543379,\"l\":43.1050228310502},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":{\"text\":\"Location by frequency loyalty\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":17.5342465753425},\"x\":0,\"xref\":\"paper\"},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.4,33.6],\"tickmode\":\"array\",\"ticktext\":[\"Katerina’s Café\",\"Hippokampos\",\"Guy's Gyros\",\"Brew've Been Served\",\"Ouzeri Elian\",\"Hallowed Grounds\",\"Abila Zacharo\",\"Kalami Kafenion\",\"Gelatogalore\",\"Bean There Done That\",\"Frydos Autosupply n' More\",\"Coffee Cameleon\",\"Jack's Magical Beans\",\"Brewed Awakenings\",\"Abila Airport\",\"Albert's Fine Clothing\",\"Nationwide Refinery\",\"Carlyle Chemical Inc.\",\"Shoppers' Delight\",\"Stewart and Sons Fabrication\",\"General Grocer\",\"Coffee Shack\",\"Chostus Hotel\",\"Desafio Golf Course\",\"Kronos Mart\",\"Ahaggo Museum\",\"Kronos Pipe and Irrigation\",\"Maximum Iron and Steel\",\"Roberts and Sons\",\"Abila Scrapyard\",\"Octavio's Office Supplies\",\"Frank's Fuel\",\"U-Pump\"],\"tickvals\":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33],\"categoryorder\":\"array\",\"categoryarray\":[\"Katerina’s Café\",\"Hippokampos\",\"Guy's Gyros\",\"Brew've Been Served\",\"Ouzeri Elian\",\"Hallowed Grounds\",\"Abila Zacharo\",\"Kalami Kafenion\",\"Gelatogalore\",\"Bean There Done That\",\"Frydos Autosupply n' More\",\"Coffee Cameleon\",\"Jack's Magical Beans\",\"Brewed Awakenings\",\"Abila Airport\",\"Albert's Fine Clothing\",\"Nationwide Refinery\",\"Carlyle Chemical Inc.\",\"Shoppers' Delight\",\"Stewart and Sons Fabrication\",\"General Grocer\",\"Coffee Shack\",\"Chostus Hotel\",\"Desafio Golf Course\",\"Kronos Mart\",\"Ahaggo Museum\",\"Kronos Pipe and Irrigation\",\"Maximum Iron and Steel\",\"Roberts and Sons\",\"Abila Scrapyard\",\"Octavio's Office Supplies\",\"Frank's Fuel\",\"U-Pump\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-90,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"Location\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-9.75,204.75],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"50\",\"100\",\"150\",\"200\"],\"tickvals\":[0,50,100,150,200],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"50\",\"100\",\"150\",\"200\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0.66417600664176,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"Frequency\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.88976377952756,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"15347a0c2774\":{\"x\":{},\"y\":{},\"type\":\"bar\"}},\"cur_data\":\"15347a0c2774\",\"visdat\":{\"15347a0c2774\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\r\nPrice_cc_card\r\n\r\n\r\nprice <- cc_data %>%\r\n  group_by(location) %>% \r\n  mutate(total_price = sum(price)) %>% \r\n    arrange(desc(total_price)) %>% \r\ndistinct(location,.keep_all = TRUE)\r\n\r\nggplot(price,aes(x = location, y = total_price)) + \r\n  geom_col() \r\n\r\n\r\n\r\n\r\n- when they are popular?\r\nHeatmap by weekday\r\n\r\n\r\nplot <- cc_data_wkday %>% \r\n  group_by(location,weekday,hour,) %>% \r\n  summarise(n = n()) %>% \r\n  ungroup() \r\n\r\nfull_df <- expand.grid(location = unique(cc_data_wkday$location),\r\n                       weekday = unique(cc_data_wkday$weekday),\r\n                       hour = c(1:23))\r\n\r\nplot_full <- plot %>% \r\n  right_join(\r\n    full_df,\r\n    by = c('location','weekday','hour') \r\n  ) %>% \r\n  mutate(hour = as.ordered(hour)) %>% \r\n  replace_na(list(n = 0L)) %>% \r\n  filter(location %in% c('Katerina’s Café'))\r\n\r\n\r\npwk<- ggplot(plot_full, aes(hour, weekday, fill = n)) + \r\ngeom_tile(color = 'white',size = 0.1) + \r\n  facet_grid(~location) +\r\n   scale_fill_distiller(palette = \"Reds\",direction = 1)\r\n\r\n\r\n\r\nHeatmap by date\r\n\r\n\r\nplot_day <- cc_data_wkday %>% \r\n  group_by(location,day,hour,) %>% \r\n  summarise(n = n()) %>% \r\n  ungroup() \r\n\r\nfull_df_day <- expand.grid(location = unique(cc_data_wkday$location),\r\n                       day = unique(cc_data_wkday$day),\r\n                       hour = c(1:23))\r\n\r\nplot_full_day <- plot_day %>% \r\n  right_join(\r\n    full_df_day,\r\n    by = c('location','day','hour') \r\n  ) %>% \r\n  mutate(hour = as.ordered(hour)) %>% \r\n  mutate(day = as.ordered(day)) %>% \r\n  replace_na(list(n = 0L)) %>% \r\n  filter(location %in% c('Katerina’s Café'))\r\n\r\n\r\npd <- ggplot(plot_full_day, aes(hour, day, fill = n)) + \r\ngeom_tile(color = 'white',size = 0.1) + \r\n  facet_grid(~location) +\r\n   scale_fill_distiller(palette = \"Reds\",direction = 1)\r\n\r\npd\r\n\r\n\r\n\r\n\r\nHeatmap car\r\n\r\n\r\ncar_data <- car %>% \r\n  group_by(day,hour) %>% \r\n  summarise(n = n()) %>% \r\n  ungroup() \r\n\r\nfull_df_car <- expand.grid(day = unique(car$day),\r\n                          hour = c(1:23))\r\n\r\nplot_full_car <- car_data %>% \r\n  right_join(\r\n    full_df_car,\r\n    by = c('day','hour') \r\n  ) %>% \r\n  mutate(hour = as.ordered(hour)) %>% \r\n  mutate(day = as.ordered(day)) %>% \r\n  replace_na(list(n = 0L)) \r\n\r\nggplot(plot_full_car, aes(hour,day,fill = n)) + \r\ngeom_tile(color = 'white',size = 0.1) + \r\n   scale_fill_distiller(palette = \"Reds\",direction = 1)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-07-14-assignment/assignment_files/figure-html5/unnamed-chunk-7-1.png",
    "last_modified": "2021-07-16T19:10:29+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-06-18-dataviz-makeover-2/",
    "title": "Dataviz makeover 2",
    "description": "The second DataViz MakeOver task for ISSS608: Visual Analytics. (Tools: Tableau Desktop 2021.1).",
    "author": [
      {
        "name": "Qinyu Wang",
        "url": "https://www.linkedin.com/in/qinyu-wang/"
      }
    ],
    "date": "2021-06-18",
    "categories": [],
    "contents": "\r\n\r\nContents\r\n1.0 Critique of Visualisation\r\n1.1 Clarity\r\n1.2 Aesthetic\r\n\r\n2.0 Alternative Design\r\n3.0 Proposed Visualization\r\n3.1 Data Preparation\r\n3.2 Data Visualization\r\n\r\n5.0 Derived Insights\r\n\r\n1.0 Critique of Visualisation\r\nThe original visualization can be seen below:\r\n\r\n1.1 Clarity\r\nNo.\r\nCritiques\r\nSuggestion\r\n1\r\nLack a title: this visualization does not have a title to clarify main topic. Through labels, we find this chart is trying to show information of merchandise trade, trade surplus and trade deficit about ten different market.\r\nAdd appropriate graph title\r\n2\r\nTime period of data is unclear: the description at the bottle of the chart said, “Since 2009, the value of exports exceeds imports for Singapore’s merchandise trade with Mainland China.” However later when describe trade deficit with the US, time become “since 2006”. Which confuse reader with data used in this chart. Besides data used for this visualization vary from time however the original chart fail to show any information about year\r\nSet date range from Jan 2011 to Dec 2020 and Add filters to graph let user select years.\r\n3\r\nAxis variables is unclear: Axis and labels on the plot is hard to understand. At the coordinate axis origin, we can find two icon show “Import” and “Export”. However, at the end of each axis we can also find “Net Import” and “Net Export” This confuses reader which variables axis want to show. Besides axis variables have no units. Reader not sure is “80” stand for percentage or numerical value.\r\nLabel Axis with percentile of Import/Export change Net Import/Export to Trade Surplus/Deficit.\r\n1.2 Aesthetic\r\nNo.\r\nCritiques\r\nSuggestion\r\n1\r\nToo much information in one chart design blurred main subjects: The design using colour to highlight country, net import and export, also using icon to mark the countries with top trade surplus and deficit. There are too many factors blurred main subjects.\r\nSeparate original graph into three parts: bubble plot, bar chart, and ranking plot.\r\n2\r\nDesign hard to read: This chart using position of the center point of each bubble, the white cycle in the bubble, to show whether the country have trade surplus or trade deficit. The white point is small and the note that explain how to read this design is also in a relatively smaller font size. Reader may not pay attention to it unless carefully read the whole chart.\r\nKeep original bubble plot and diagonal reference line. In the new design, we use the position of bubble inside of centre points to show the relationships between import and export value. For the country close or on the reference line. We add another bar chart to provide additional information. The bar chart will show monthly balance of trade. User can also filter country by click on the bubble.\r\n3\r\nThe bubbles overlap on each other, which makes reader hard to find the center point for some regions such as Republic of Korea and EU.\r\nEdit percentage of opacity in Tableau can help overcome this problem.\r\n2.0 Alternative Design\r\n\r\n3.0 Proposed Visualization\r\nPlease view the visualization on Tableau Public here\r\n3.1 Data Preparation\r\nWe notice this dataset are in report format inside of a tidy format for analysis. Hence, using MS Excel delete description at the front of each sheet. Then Open Tableau, drag and drop Ms excel file in.\r\n2.Povite Dataset: Select all date column, click the black triangle, then choose “Pivot”. To pivot the sheet into a longer format. Next, double click the title, rename pivot column into “Time” “import” and “country”.\r\n\r\n\r\nChange Time into Date format and Export to Number(whole)\r\n\r\nAdd filter: Add two filter conditions. Click the “Edit”, first filter the countries we used for this visual analysis. Second range date from 1/1/2011 to 1/12/2020.\r\n\r\nAdjust unit of European Union: First using Customer Split function, Split Country name into one column. Separator as “(“ .\r\n\r\n\r\nNext, we add calculation column using function below, Through this step, Transfer European Union’s unit from Million Dollars to Thousand Dollars.\r\n\r\nDo the same cleaning steps for T2, then export T1 and T2 to “.csv” files. Rename T1 as “Import.csv” and T2 as “Export.csv”\r\nCombine two tables: Open another Tableau book. Drag the CSV files in. Using Inner Join function merge two files.\r\n\r\n3.2 Data Visualization\r\nAdd Balance of Trade: add calculation columns using functions below:\r\n\r\nbuild basic bubble plot: Drag and drop Import and Export into Rows and Columns. Select” Country” as detail. For a clear visualization, we transfer both “Import” and “Export” into percentile calculated by country. Click the triangle on the node, select “Quick table calculation-percentile”. Next at the same menu choose “computing using-country”.\r\n\r\n\r\nAdd Diagonal Reference Line: Drag and drop another “import” to Columns, do the same transformation as previous step. The chart should look as below:\r\n\r\nNext, click the triangle on our new “Import” node, choose “Dual Axis”. Hold mouse near the reference line spot, right click, choose” Trend Line-Show Trend Line”. Next,under SUM(Import), adjust” Size” to smallest. “Color” to “opacity” to 0 and “border” to none.\r\n\r\nRight click Axis on the top, uncheck ”show Header”\r\n\r\nRight click x-Axis check “synchronize Axis”\r\n\r\nThe finished plot shows below, reference line separates the whole plot into two parts, the part above reference line means Import over Export and below means Export over Import. Add two Annotates to show the area of Trade Surplus and Trade Deficit. However, the data we used are vary from time. Hence, next we should add “Time” as filter.\r\n\r\nAdd filter: Drag “Time” to Filter, adjust setting choose “Single Value (slider)”\r\n\r\nDrag country to color. Add Annotates “Trade Deficit” put it upper left ,change color to red and “Trade Surplus” at bottom right and change color to blue.\r\nclick” Label”. Change Direction of label from Automatic to vertical.\r\n\r\nright click on X and Y Axis. Choose Edit Axis. Adjust them to fix range from 0 to 1.0\r\n\r\nEdit Tooltip:\r\n\r\nthe bubble plot can only give a general information about each country. Hence, add bar chart to show more detail information.\r\nSelect “Country” and “MONTH(Time)” as Columns. Drag two Balance of Trade into Rows.\r\n\r\nNext edit Axis, let two balance of Trade show positive and negative value respectively. Rename positive part as “surplus” and negative part as “deficit”.\r\n\r\n\r\nUsing the same method add filter bar of time and country. Drag Balance of Trade to color. Edit color to red and blue. Fix start and end value.\r\n\r\n\r\nAdd ranking graph for annual import and export. Drag Country and Export to Rows and Columns. Click triangle behand country. Sort by Nested. Drag Export to color and edit color to same color as surplus. Add title and insert Year to title. Duplicate sheet for Import.\r\n\r\n\r\nCreate Dashboard\r\nDrag four sheets into Dashboard. Adjust position.\r\nCreate filter action: when user click the country bubbles on bubble plot. Monthly bar chart plot filter by country which select. Under Dashboard menu, find action, choose add action-filter.\r\n\r\n\r\nAdjust filter bar on the right: on dashboard, left one filter bar for time and one for country. To achieve this, first, delete extra filters. Next go to bubble plot sheet. for time, click the triangle, find apply to worksheet change to all using this data source. For country, at the same place, choose selected worksheets, then choose bar chart.\r\n\r\nAdd title, data source and description.\r\nTurn on Animations setting: under format menu, click Animations. Default as “off” Turn on the rest as default setting. This step for smoother change when change from different years.\r\n\r\n5.0 Derived Insights\r\nOverall for export, Malaysia, Mainland China, and Hong Kong are major export market and Mainland China, Malaysia, European Union are major import markets\r\nFrom 2011 to 2020, Hong Kong, Indonesia, and Thailand are countries with trade surplus. Balance of Trade maintain positive. Hong Kong has the highest trade surplus value from 2011 to 2020 and remain stable. Indonesia rank second. However, we can observe a decreasing trend of balance of trade with Indonesia.\r\nEuropean Union, Japan and United State are countries with trade deficit. From 2011 to 2009, those country maintain a negative balance of trade.\r\nFor Japan, Mainland China, Republic of Korea and Malaysia, before 2018 they show clear trade surplus or deficit. Since 2018, Trade with this group gradually approaching trade balance.\r\nWe observed some unusual insights in 2020. The annual import from Taiwan increased significantly and rank third large import market in 2020. Export from US also extremely increased at the second half of 2020 which turn a decade trade deficit to trade surplus.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-06-20T22:27:32+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-06-15-isss608-a2/",
    "title": "Be Customer Wise or Otherwise",
    "description": "The second individual Assignment for ISSS602:Clustering Analysis (Tools:JMP Pro 15).",
    "author": [
      {
        "name": "Qinyu Wang",
        "url": "https://www.linkedin.com/in/qinyu-wang/"
      }
    ],
    "date": "2021-06-15",
    "categories": [],
    "contents": "\r\n\r\nContents\r\n1. OVERVIEW\r\n2. DATA PREPARATION\r\n2.1 Data Quality Issues Identified\r\n2.1.1 Inaccurate Data Type\r\n2.1.2 Data Summary\r\n2.1.3 Missing Values\r\n\r\n2.2 Clustering Variables Preparatio\r\n\r\n3. CUSTOMER SEGMENTATION AND ANALYSIS\r\n3.1 K-Means Clustering\r\n3.2 Latent Class Analysis\r\n\r\n4.RECOMMENDATIONS\r\n\r\n1. OVERVIEW\r\nProducts and service today are more and more customer-specific instead of a ‘one-size-fits-all’ approach Customer segmentations are used in many industries. Segmentation allows businesses to make better use of their marketing budgets, demonstrate a better knowledge of your customers’ needs and wants and finally make profit.\r\nIn this study, customer segmentation will be performed on a Europe four-star hotel customers dataset. Customers will be segmented based on RFM performance. Recency, Frequency, and Monetary (RFM) metrics are important indicators of a customer’s behaviours because frequency and monetary value affects a customer’s lifetime value, and recency affects retention, a measure of engagement. The eventual goal is to provide recommendations to hotel to better understand their customers.\r\n2. DATA PREPARATION\r\nThe dataset HotelCustomersDataset.tsv comprised of 31 variables and 83,591 observations. The data came from a four-star hotel located in Lisbon, Portugal, Europe during three years. 13 of 31 variables are Boolean variables which indicated customers special requirement (1 means Yes;0 means No).\r\nNext in data cleaning, I identified several data issues and took steps to rectify these issues for more meaningful data analysis\r\nFinally, the dataset was reduced by hided and excluded variables that were not used in this analysis.\r\n2.1 Data Quality Issues Identified\r\n2.1.1 Inaccurate Data Type\r\n13 of 31 variables are Boolean variables which indicated customers special requirement (1 means Yes;0 means No). So those variables should be changed from “Numeric-Continuous” to “Numeric-Nominal”. First, I grouped those variables together then changed data type using “Standardize Columns Attributes”. I also found “Age” should be “Numeric-Ordinal” instead of “Character-Nominal”\r\n\r\n2.1.2 Data Summary\r\nI checked data summary using “Column Viewer” under Col function. I observed some data issues. First, “Age” ranges from -11 to 122. Negative age does not make sense. Besides, “Age” has 3780 missing values. Second, “AvergaLeadTime”,” DaySinceLastStay” and “DaySinceFirstStay” all have value -1. Refer to data description document, I found that -1 represents this customer never stay in the hotel.\r\n\r\nAccording to Age requirement for Hotel in Europe , customer who under 18 years old cannot stay in hotel alone. Hence, I will not take customers whose age under 18 and over 90 in to consider. Next, I selected those variables by using “Select Where” and removed them from the dataset for more meaningful analysis results.\r\n\r\n2.1.3 Missing Values\r\n3779 missing values found in variable ‘Age’ and 1 missing value missed all 12 variables, Missing values accounted for < 1% of total. Hence, I hided and excluded those data from the dataset.\r\nIn addition, I observed that for the distributions of “DaysSinceCreation”, data from 1050 to 1100 is relative less than other groups. This may cause by potential missing values. Therefore, I hided and excluded this period from analysis.\r\n\r\n2.2 Clustering Variables Preparatio\r\nI choose “DaySinceLastStay” for Recency; “LodgingRevenue” and “OtherRevenue” as Monetary Variables. “DaySinceLastStay” indicated that The numbers of days elapsed between the last day of the extraction and the customer’s last arrival data. Therefore, the smaller value is, the higher Recency this customer has. For Frequency, I count for how many records under same “NameHash” by using Summary under Table function. Change column “N row” into “Frequency”. Next, I joined this column to main table by using Update under Table function.\r\n\r\n3. CUSTOMER SEGMENTATION AND ANALYSIS\r\nFigure 6 shows the correlations between clustering variables. I observed that the highest correlation is between LodgingRevenue and OtherRevenue (0.4554). None of final clustering variables correlation above |0.8|. Hence, we accept all variables for clustering later.\r\n\r\n3.1 K-Means Clustering\r\nFigure 7 illustrates the K-Means cluster of untransformed “LodgingRevenue”,” OtherRevenue”, “DaySinceLastStay” and “Frequency” variables scaled individually. Most of CCC values are negative because of high degrees of skewness and significant number of outliers.\r\n\r\nFigure 8 shows the distributions of all clustering variables before transaction.\r\n\r\n\r\n\r\nK-Means clustering is very sensitive to outliers. Hence, data transformation is important to reduce the skewness to resemble normal distribution for each variable in order to fix negative CCC problem.\r\nFigure 8 shows the cluster comparison using the transformed values. Most of the CCC is positive excepted 3-Cluster,6-Cluster and 7-Cluster. JMP Pro 15 chosen the 4-cluster as the optimal choose. However, I observed that 8-clusters and 14-clusters have larger CCC. We also find most of the CCC are negative values from 3-clusters to 7-clusters, which means 4-Clusters is more sensitive to outliers. 8-clusters and 14-clusters can be better choice.\r\nAfter compared the result of 8 and 14 clusters, we find that 14 clusters have relative larger values range between different clusters. For more meaningful analysis result, 8-Cluster is our final choice.\r\nFigure 9 shows the cluster summary of K-Mean NCluster=8. Most of cluster count is distributed with values ranging from 13526 to 6758. Three of all clusters have relative less counts which around 1000. This cluster is saved, and a parallel graph is plotted for further analysis as shown in Figure 11 and Table 1 shows the summary of all 8 clusters. In general, it is hard to qualify unique feature of each cluster, especially for Recency, because of significant outliers.\r\n\r\n\r\n\r\n\r\n\r\n3.2 Latent Class Analysis\r\nBefore Latent Class Analysis, continuous variables should be transferred into categorical data though binning. Figure 12 illustrated the 4 binned variables as new columns. The new categorical variables will be used for latent class clustering. Figure 13 shows the result of LCA. 7 and 10 clusters had the smallest BIC and AIC, respectively. Figure 14 shows that 10 clusters have the highest effect size for three variables among 7-10 clusters. This clusters will be saved.\r\n\r\n\r\n\r\n\r\n\r\n\r\nTogether with the insights from Table 2, the 10 clusters were recoded based on customer category and customer segment as shown in Figure 16. Figure 17 was a Bar chart shows percentage of each customer segment.\r\n\r\n\r\nThe bar chart reveals some interesting insights. According to customer category, Potential customer have the largest percentage accounts for 45% total observations. Followed by Non-customer group, which account for 37% of total. Potential Lost Customer account for 15% and Core Customer only accounts for 2% of total observations. Loyalist only account for 2% and it is in line with the hotel industry since not a large amount customer will come to a same hotel for more than one times. This observation was also highlighted by New Customer and Lost Customers, I observed that New Customer have the highest percentage in all customer segments. Even though hotel have a large number of lost customers, with new customers hotel still have change make profit.\r\n4.RECOMMENDATIONS\r\nThe following recommendations in Table 3 are suggested for each customer segment.\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-06-15-isss608-a2/img/pre.jpg",
    "last_modified": "2021-06-15T19:29:31+08:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-05-22-dataviz-makeover-1/",
    "title": "DataViz Makeover 1",
    "description": "The first DataViz MakeOver task for ISSS608: Visual Analytics. (Tools: Tableau Desktop 2021.1,MS Excel).",
    "author": [
      {
        "name": "Qinyu Wang",
        "url": "https://www.linkedin.com/in/qinyu-wang/"
      }
    ],
    "date": "2021-05-22",
    "categories": [],
    "contents": "\r\n\r\nContents\r\n1.0 Critique of Visualization\r\n1.1 Clarity\r\n1.2 Aesthetic\r\n\r\n2.0 Alternative Design\r\n2.1 Clarity\r\n2.2 Aesthetic\r\n\r\n3.0 Proposed Visualisation\r\n3.1 Data Preparation\r\n3.2 Data Visualization\r\n\r\n5.0 Derived Insights\r\n\r\n1.0 Critique of Visualization\r\nThe original visualization can be seen below:\r\n\r\n1.1 Clarity\r\nThe title of the graph does not convey the intent of the graph. The graph trying to compare merchandise trade data of top six trading countries from 2009 to 2020. However, the original title stays on the description of the data and does not drive the messages of the major observation of the graph and does not have sub-title to explain the key words.\r\nX-axis is unclear. The title of this graph said, “Merchandise Trade of Top Six Countries, 2009-2020”. But we can observe that the X-axis still have the data from 2021. Besides X axis label use” Month of period” but there are no tick marks or label show the months.\r\nThe unit of Y-axis is not uniform. Some country uses million and some uses thousand make it hard to do comparison.\r\nThe Area chart is used, which is meaningless because the shaded area does not have means. Besides putting import and export in the same chart make is hard to identify the trends.\r\n1.2 Aesthetic\r\nTick marks not been used for both X and Y-axis.\r\nPut six countries one as an individual part is a good design to show the comparison and the part of each country is too small to intent more detail. And Repeated labels for each country is unnecessary.\r\nThe font of the title is smaller than the font of the label.\r\n2.0 Alternative Design\r\n\r\n2.1 Clarity\r\nAdd explanation to the main findings. Adjust Y-axis unit of data to million dollars and separate import and export to two different charts make it easier to compare the trend.\r\nUse Month to separate the charts inside of countries. Enable the reader to compare the trend between different countries in the same period of 2019 and 2020 and identify the overall rank.\r\nAdd tooltip to show the percentage of change and annotate let reader identify the key findings.\r\n2.2 Aesthetic\r\nAdd tick marks to Y-axis.\r\nUse color highlight the main countries want to show to the readers and to show the increase and decrease percentage.\r\n3.0 Proposed Visualisation\r\nPlease view the visualisation on Tableau Public here\r\n3.1 Data Preparation\r\nFirst select the data we used from data source. The original number unit of America import and export data are million dollars. Converting it into thousand dollars by using “Paste Special-operation-multiply”.\r\n Then, reformat data we used into time series format and rename countries and adjust data retention to integer.\r\n\r\n3.2 Data Visualization\r\nImport into Tableau\r\n\r\n\r\n2.Change data type. Change ‘Time’ data type from string to Date.\r\n\r\nCreate line chart Drag [Time] and [Import] to Columns and Rows respectively. Click “+” mark on [Time] and add MONTH to Columns. Then adjust the order of YEAR and MONTH For export line chart, drag [Export] to Rows. \r\nApply colour Drag [Country] to colour, adjusting colours and choose brighter to highlight America, Mainland China, Malaysia and Taiwan.\r\n\r\nUpdate view Update view from ‘Standard’ to ‘Entire View’.\r\nReformat MONTH and YEAR labels Click the triangle behand MONTH, choose Format. Update Date from Automatic to Abbreviation. Update YEAR to two-digital through same method.\r\n\r\nUpdate Tooltip First create increase and decrease fields through: Analysis-Create Calculated Field and the code shows below:\r\n\r\nAdjust data to percentage format with one decimal places.\r\n\r\n8.Create Dashboard\r\nAdd Title: “Merchandise Import and Export Trends of Six Top Countries，2019-2020”\r\nAdd Explanation: “In general, American and Mainland China are two main market for both import and export in 2019 and 2020.For import,compared with the same period in 2019, American shows a overall decrease trend while Taiwan has an increase trend.And for export, a clear decrease trend showed in Malaysia with highest -42.1% decrease.”\r\nAdd sheets “IMPORT” and “EXPORT” to Dashboard.\r\nAdjust Size to “Automatic”.\r\nAdd Data Source at the bottle of the Dashboard.\r\nThe final graph shows below:\r\n\r\n5.0 Derived Insights\r\nIn general, American and Mainland China are two main market for both import and export in 2019 and 2020. Taiwan ranks higher as an import market instead of export and Hong Kong, on the contrary, more important as an export market.\r\nFor import, compared with the same period in 2019, American shows a overall decrease trend with maximum -32.6% drop in Aug. While import form Taiwan shows an overall increasing trend.\r\nFor export, a clear decrease trend showed in Malaysia with highest -42.1% decrease. Merchandise export to Mainland China is concentrated in Aug-Dec of 2019 and 2020. Compared with 2019, 2020 export more to Mainland China in the second half of the year with highest increase 23.1% in Oct.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-05-22-dataviz-makeover-1/img/original graph.jpg",
    "last_modified": "2021-06-11T11:22:35+08:00",
    "input_file": {}
  }
]
